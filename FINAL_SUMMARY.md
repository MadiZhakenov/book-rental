# ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ Freemium - –ì–û–¢–û–í–û

## –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (–†—É—Å—Å–∫–∏–π + –ö–∞–∑–∞—Ö—Å–∫–∏–π)
**–ü–æ–¥—Ö–æ–¥**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–º–µ—Å—Ç–æ next-intl (–∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Next.js 16)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- `/` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/ru` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `/ru` ‚Üí —Ä—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
- `/kk` ‚Üí –∫–∞–∑–∞—Ö—Å–∫–∞—è –≤–µ—Ä—Å–∏—è

**–§–∞–π–ª—ã**:
- `app/ru/page.tsx` - —Ä—É—Å—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `app/kk/page.tsx` - –∫–∞–∑–∞—Ö—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `components/navbar-ru.tsx` - —Ä—É—Å—Å–∫–∏–π –Ω–∞–≤–±–∞—Ä (—Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –Ω–∞ KK)
- `components/navbar-kk.tsx` - –∫–∞–∑–∞—Ö—Å–∫–∏–π –Ω–∞–≤–±–∞—Ä (—Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –Ω–∞ RU)

**–ü–µ—Ä–µ–≤–æ–¥—ã**:

üá∑üá∫ **–†—É—Å—Å–∫–∏–π** (`/ru`):
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ê—Ä–µ–Ω–¥—É–π –∫–Ω–∏–≥–∏ —É –ª—é–¥–µ–π –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏"
- –ö–Ω–æ–ø–∫–∏: "–ù–∞–π—Ç–∏ –∫–Ω–∏–≥—É", "–°–¥–∞—Ç—å –∫–Ω–∏–≥—É"
- –ù–∞–≤–∏–≥–∞—Ü–∏—è: "–ö–∞—Ç–∞–ª–æ–≥", "–ö–∞—Ä—Ç–∞", "–í–æ–π—Ç–∏", "–ù–∞—á–∞—Ç—å"
- –ë–µ–π–¥–∂: "–î–æ—Å—Ç—É–ø–Ω–æ –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ"
- –°–æ—Ü. –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ: "–ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç 1,000+ —á–∏—Ç–∞—Ç–µ–ª–µ–π"

üá∞üáø **–ö–∞–∑–∞—Ö—Å–∫–∏–π** (`/kk`):
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ñ–∞–Ω—ã“£–¥–∞“ì—ã –∞–¥–∞–º–¥–∞—Ä–¥–∞–Ω –∫—ñ—Ç–∞–ø –∂–∞–ª“ì–∞ –∞–ª"
- –ö–Ω–æ–ø–∫–∏: "–ö—ñ—Ç–∞–ø —ñ–∑–¥–µ—É", "–ö—ñ—Ç–∞–ø —Ç–∞–ø—Å—ã—Ä—É"
- –ù–∞–≤–∏–≥–∞—Ü–∏—è: "–ö–∞—Ç–∞–ª–æ–≥", "–ö–∞—Ä—Ç–∞", "–ö—ñ—Ä—É", "–ë–∞—Å—Ç–∞—É"
- –ë–µ–π–¥–∂: "–°—ñ–∑–¥—ñ“£ “õ–∞–ª–∞“£—ã–∑–¥–∞ “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ"
- –°–æ—Ü. –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ: "–ë—ñ–∑–≥–µ —Å–µ–Ω–µ–¥—ñ 1,000+ –æ“õ—ã—Ä–º–∞–Ω"

#### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Freemium –º–æ–¥–µ–ª—å)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ schema.prisma**:
```prisma
model User {
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  isPremium Boolean @default(false)  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
}
```

**–ú–∏–≥—Ä–∞—Ü–∏—è**: `20251210115711_init_with_premium` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

#### 3. Backend –ª–æ–≥–∏–∫–∞ (–õ–∏–º–∏—Ç—ã)
**–§–∞–π–ª**: `apps/api/src/books/books.service.ts`

**–õ–æ–≥–∏–∫–∞**:
```typescript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–Ω–∏–≥–∏:
if (!user.isPremium && user._count.books >= 5) {
  throw new ForbiddenException(
    '–õ–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏—Å—á–µ—Ä–ø–∞–Ω (–º–∞–∫—Å. 5). –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É.'
  );
}
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `create()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–∞
- `findAll()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–Ω–∏–≥
- `findOne()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∫–Ω–∏–≥–∏
- `update()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)
- `remove()` - —É–¥–∞–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)

---

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
npm run dev
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000` ‚Üí –¥–æ–ª–∂–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ `/ru`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/ru` ‚Üí —Ä—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
3. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/kk` ‚Üí –∫–∞–∑–∞—Ö—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
4. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ —è–∑—ã–∫–∏ —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫–∏ –≤ –Ω–∞–≤–±–∞—Ä–µ (RU/KK)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ freemium
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å 6 –∫–Ω–∏–≥
3. –ù–∞ 6-–π –∫–Ω–∏–≥–µ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—à–∏–±–∫–∞:
   ```
   403 Forbidden: "–õ–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏—Å—á–µ—Ä–ø–∞–Ω (–º–∞–∫—Å. 5). –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É."
   ```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É –Ω–µ next-intl?
Next-intl –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Next.js 16 (Turbopack):
- Middleware –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ routing
- Dynamic routes `[locale]` –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Source map –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ - –Ω–∞–¥–µ–∂–Ω–µ–µ –∏ –ø—Ä–æ—â–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏  
‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫  
‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏  
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü  
‚úÖ –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É `/ru` –∏ `/kk`  
‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ —è–∑—ã–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞  
‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é —è–∑—ã–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞**:
   - –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ `/ru` –∏–ª–∏ `/kk` –Ω–∞ –æ—Å–Ω–æ–≤–µ `Accept-Language`

2. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–¥–ø–∏—Å–∫–∏**:
   - `/pricing` - —Ç–∞—Ä–∏—Ñ—ã
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

3. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å Subscription**:
   ```prisma
   model Subscription {
     id        String   @id @default(uuid())
     userId    String
     user      User     @relation(fields: [userId], references: [id])
     plan      String   // "premium"
     startDate DateTime
     endDate   DateTime
     status    String   // "active", "expired", "cancelled"
   }
   ```

4. **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
   - `/catalog` - –∫–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥
   - `/map` - –∫–∞—Ä—Ç–∞
   - `/login`, `/register` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

---

## ‚ú® –ò—Ç–æ–≥

**–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**:
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è RU/KK (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥)
- ‚úÖ Freemium –º–æ–¥–µ–ª—å –≤ –ë–î
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –≤ backend

**–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ —É–¥–∞–ª–µ–Ω** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ RU –∏ KK.

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üéâ
